{% load static %}
{% load crispy_forms_tags %}
<!doctype html>
<html lang="en" style="width:100%">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!--Animate on Click-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <!-- Animate on Scroll CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- FontAwesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet"  href="{% static 'styles.css' %}" type="text/css" />
    <title>Hello, world!</title>
</head>

<body style="width:100%">
    <div {%block bg-img%}{%endblock%}>
        <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: rgba(0,0,0,0.2); font-size:1em;" role="navigation">
            <a style= "padding: 30px;color: white" class="navbar-brand" href="{% url 'home' %}">PMT</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            
        
            <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
                <ul class="nav navbar-nav ml-auto">
                    {%if not user.is_authenticated%}
                    <li style= "color: white" class="nav-item">
                        <a style= "color: white" class="nav-link" href="{% url "shop" %}">Shop</a>
                    </li>
                    <li class="nav-item active">
                        <a style= "color: white" class="nav-link" href="{% url "login" %}">Login <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a style= "color: white" class="nav-link" href="{% url "register" %}">Register</a>
                    </li>
                    {%endif%}
                    {% if 'administrator' == request.user.groups.all.0.name %} 
                    <li>
                        <a style= "color: white" class="nav-link" href="{% url "administrator_view" %}"><i style="font-size: 1.3em;" class="fas fa-tools"></i></a>
                    </li>
                    {% endif %}
                    {%if user.is_authenticated%}
                    <li class="nav-item">
                        <a style= "color: white" class="nav-link" href="{% url "shop" %}"><i style="font-size: 1.3em;" class="fas fa-shopping-cart"></i></a>
                    </li>
                    <li class="nav-item">
                        <a style= "padding-bottom: 0;color: white" class="nav-link jumping-btn" href="{% url "showbasket" %}"><i style="font-size: 1.3em;" class="fas fa-shopping-basket"></i> <span style="font-size:0.8em;">({{total_quantity}})</span></a>
                    </li>
                    <li class="nav-item dropdown">
                        <a style= "color:#ec4e20" class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          {% if request.user.username %}Welcome back {{request.user.username}}{% endif %}
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a style= "color: black" class="dropdown-item" href="{% url "showbasket" %}">My Basket</a>
                            <a style= "color: black" class="dropdown-item" href="{% url "edit_profile" id=user.id %}">My Profile</a>
                            <a style= "color: black" class="dropdown-item" href="{% url "password_reset" %}">{%if user.is_authenticated%}Change your Password{%endif%}{%if not user.is_authenticated%}Reset Password{%endif%}</a>
                            <div style= "color: black"  class="dropdown-divider"></div>
                            <a style= "color: black" class="dropdown-item" href="{% url "logout" %}">Logout</a>
                        </div>
                    </li>
                    {%endif%}
                </ul>   
            </div>
        </nav>
        {% if messages %}
        {%for m in messages%}
        {% if m.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
        <div class = "alert alert-danger">
            {% else %}
        <div class = "alert alert-success">  
            {%endif%}
            {{m}}
        </div>

        {%endfor%}
        {%endif%}
    {% block title %}{% endblock %}
    {%block content%}{%endblock%}
    </div>
    
    {%block footer%}{%endblock%}
    {%block more_info%}{%endblock%}
    

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    {% block footer_js %}{%endblock%}
</body>

</html>
